<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ty2huang.github.io/squirrels-docs/tutorial/testapi/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>5. Activate the REST APIs & Test - Squirrels Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "5. Activate the REST APIs \u0026 Test";
        var mkdocs_page_input_path = "tutorial\\testapi.md";
        var mkdocs_page_url = "/squirrels-docs/tutorial/testapi/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Squirrels Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../overview/">Overview</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorial</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../initialize/">1. Initialize a Squirrels Project</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../manifest/">2. Configure the Manifest File</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../parameters/">3. Create the Dataset Parameters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../queries/">4. Create the SQL Queries</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">5. Activate the REST APIs & Test</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#test-the-rendered-sql-queries">Test the Rendered SQL Queries</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../context/">6. Use the Context File</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Command Line Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../cli/init/">init</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cli/load-modules/">load-modules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cli/credentials/">credential management</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cli/test/">test</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cli/run/">run</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">How To...</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../how-to/database/">Configure Database Connections</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../sql-views.md">Create Views with SQL and Jinja</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../python-views.md">Create Views with Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../how-to/common-vary/">Design for Commonality and Variability</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Squirrels Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Tutorial &raquo;</li>
      <li>5. Activate the REST APIs & Test</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="activate-the-rest-apis-test">Activate the REST APIs &amp; Test</h1>
<p>In the <code>weather_by_time</code> datasets folder, go into <code>context.py</code> and replace the body of the <code>main</code> function to:</p>
<pre><code class="language-python">return {}
</code></pre>
<p>We will discuss the <code>context.py</code> file later in the tutorial. For now, we are changing it to return an empty dictionary such that we can activate the REST APIs without errors.</p>
<p>To activate the API server, simply run:</p>
<pre><code class="language-bash">squirrels run --debug
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>--debug</code> argument is optional here. This is specified to be able to test with hidden parameters, though no hidden parameters were set up for this tutorial. See <code>squirrels run --help</code> or the "<a href="../../cli/run/">run command line</a>" page for more details.</p>
</div>
<p>Then, in a web browser, go to <code>http://localhost:8000/</code> to interact with the dataset APIs you've just created using the Squirrels UI!</p>
<h2 id="test-the-rendered-sql-queries">Test the Rendered SQL Queries</h2>
<p>In practice, you may wish to review what the rendered SQL queries look like (for some set of parameter selections) before actually running the queries.</p>
<p>To do this for the <code>weather_by_time</code> dataset (using the default parameter selections), run:</p>
<pre><code class="language-bash">squirrels test weather_by_time
</code></pre>
<p>This creates the folder path <code>outputs/weather_by_time</code> with the generated SQL queries (without actually running them). Confirm all output files look as expected. We can also use the following to run the generated queries as well and generate the database views / final view as csv files.</p>
<pre><code class="language-bash">squirrels test weather_by_time --runquery
</code></pre>
<p>We can also test on non-default parameter selections. In the dataset folder, change the contents of the <code>selections.cfg</code> file to: </p>
<pre><code class="language-config">[parameters]
group_by = 2
</code></pre>
<p>When we define multiple parameters, the order of the parameters specifed here must be the same as the order as defined in the <code>parameters.py</code> file (especially if cascading parameters exist). The "2" represents selecting the "Month" option for the <code>group_by</code> parameter. Run the following to render the SQL queries with <code>selections.cfg</code>:</p>
<pre><code class="language-bash">squirrels test weather_by_time --cfg selections.cfg
</code></pre>
<p>See <code>squirrels test --help</code> or the page for the "<a href="../../cli/test/">test command line</a>" for more details.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../queries/" class="btn btn-neutral float-left" title="4. Create the SQL Queries"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../context/" class="btn btn-neutral float-right" title="6. Use the Context File">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../queries/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../context/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
